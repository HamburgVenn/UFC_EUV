namespace = flavor_ufc

flavor_ufc.0 = { #Consulate of the Sea
	type = country_event
	title = flavor_ufc.0.title
	desc = flavor_ufc.0.desc
	fire_only_once = yes
	image = "gfx/interface/illustrations/event/backgrounds/special/spaceship.dds"

	option = {
		name = flavor_ufc.0.a
		custom_tooltip = flavor_ufc.0.a.tt
	}
}

flavor_ufc.1 = { #Consulate of the Sea
	type = country_event
	title = flavor_ufc.1.title
	desc = flavor_ufc.1.desc
	historical_info = flavor_ufc.1.hist
	fire_only_once = yes
	dynamic_historical_event = {
		tag = UFC
		from = 1337.3.1
		to = 1337.6.1
		monthly_chance = 100
	}

	illustration_tags = {
		10 = regular
		10 = exterior
	}

	immediate = {
		character:gra_fatima_bint_al_ahmar_nasrid ?= { save_scope_as = target_character}
	}

	option = {
		name = flavor_ufc.1.a
		historical_option = yes
		custom_tooltip = flavor_ufc.1.tt
		scope:target_character = {
			add_adm = 30
			add_dip = 50
		}
		show_as_tooltip = {
			scope:target_character = {
				add_character_modifier = {
					modifier = "ufc_modifier_fatima"
					size = 1
					days = -1
				}
			}
		}
	}
}

flavor_ufc.2 = {
	hide_portraits = yes
	type = country_event
	category = situation_event
	title = flavor_ufc.2.title
	image = "gfx/interface/illustrations/situation/columbian_exchange.dds"
	desc = flavor_ufc.2.desc
	option = {
		name = flavor_ufc.2.a
		add_gold = 1
		custom_tooltip = flavor_ufc.2.a.tt
	}
}

flavor_ufc.3 = { #Consulate of the Sea
	type = country_event
	title = flavor_ufc.3.title
	desc = flavor_ufc.3.desc
	historical_info = flavor_ufc.3.hist
	fire_only_once = yes
	dynamic_historical_event = {
		tag = UFC
		from = 1338.1.1
		to = 1340.6.1
		monthly_chance = 30
	}

	illustration_tags = {
		10 = regular
		10 = exterior
	}

	immediate = {
		create_character = {
			first_name = name_abu
			last_name = "ULLAR"
			adm = 42
			dip = 23
			mil = 87
			culture = culture:moroccan
			birth_location = location:fez
			religion = religion:sunni
			birth_date = 1295.1.1
			estate = estate_type:nobles_estate
			save_scope_as = target_character
		}
	}

	option = {
		name = flavor_ufc.3.a
		custom_tooltip = flavor_ufc.3.a.tt
		capital = {
			construct_building = {
				building_type = building_type:UFC_recruitment_centre
				owner = c:UFC
				payer = c:UFC
				cost_multiplier = 0.1
				cost_multiplier_reason = "game_concept_event"
			}
		}
		scope:target_character = {
			move_country = c:UFC
		}
		international_organization:ufc_trade_association = {
			change_variable = {
				name = ufc_gra_payment_multiplier
				add = 0.1
			}
		}
		add_army_tradition = army_tradition_extreme_bonus
	}

	option = {
		name = flavor_ufc.3.b
		custom_tooltip = flavor_ufc.3.b.tt
	}
}


flavor_ufc.4 = {
	type = country_event
	title = flavor_ufc.4.title
	desc = flavor_ufc.4.desc
	fire_only_once = yes
	dynamic_historical_event = {
		tag = UFC
		from = 1337.8.1
		to = 1347.8.1
		monthly_chance = 5
	}

	illustration_tags = {
		10 = angry
		10 = interior
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:burghers_estate }
	}

	option = {
		name = flavor_ufc.4.a
		add_estate_satisfaction = {
			type = estate_type:nobles_estate
			value = 0.1
		}
		add_estate_satisfaction = {
			type = estate_type:burghers_estate
			value = -0.1
		}
		add_gold_to_estate = {
			estate_type = estate_type:nobles_estate
			value = 10
		}
		add_gold_to_estate = {
			estate_type = estate_type:burghers_estate
			value = -10
		}
	}
}


flavor_ufc.5 = {
	type = country_event
	title = flavor_ufc.5.title
	desc = flavor_ufc.5.desc
	fire_only_once = yes
	dynamic_historical_event = {
		tag = UFC
		from = 1337.8.1
		to = 1347.8.1
		monthly_chance = 5
	}

	illustration_tags = {
		10 = angry
		10 = interior
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:burghers_estate background = estate_type:burghers_estate }
	}

	option = {
		name = flavor_ufc.5.a
		change_societal_value = {
			type = traditionalist_vs_innovative
			value = -10
		}
		change_societal_value = {
			type = individualism_vs_communalism
			value = 10
		}
	}
	option = {
		name = flavor_ufc.5.b
		change_societal_value = {
			type = traditionalist_vs_innovative
			value = 10
		}
		change_societal_value = {
			type = individualism_vs_communalism
			value = -10
		}
	}
}

flavor_ufc.6 = {
	type = country_event
	title = flavor_ufc.6.title
	desc = flavor_ufc.6.desc
	fire_only_once = yes
	dynamic_historical_event = {
		tag = UFC
		from = 1337.8.1
		to = 1347.8.1
		monthly_chance = 5
	}

	illustration_tags = {
		10 = regular
		10 = interior
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:burghers_estate background = estate_type:burghers_estate }
	}

	option = {
		name = flavor_ufc.6.a
		add_stability = 3.5
	}
}


flavor_ufc.7 = {
	type = country_event
	title = flavor_ufc.7.title
	desc = flavor_ufc.7.desc
	fire_only_once = yes
	dynamic_historical_event = {
		tag = UFC
		from = 1337.6.1
		to = 1347.8.1
		monthly_chance = 50
	}

	illustration_tags = {
		10 = regulqr
		10 = exterior
	}

	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:nobles_estate background = estate_type:nobles_estate }
	}

	option = {
		name = flavor_ufc.7.a
		hidden_effect = {
			every_current_war = {
				limit = {
					attacker_leader ?= c:MOR
				}
				c:GRA = {
					white_peace = prev
				}
			}
		}
		c:GRA = {
			remove_rival = c:MOR
			create_alliance = {
				target = c:MOR
			}
		}
	}
}


flavor_ufc.8 = {
	type = country_event
	title = flavor_ufc.8.title
	desc = flavor_ufc.8.desc
	fire_only_once = yes
	dynamic_historical_event = {
		tag = UFC
		from = 1346.1.1
		to = 1348.1.1
		monthly_chance = 100
	}
	image = "gfx/interface/illustrations/situation/black_death.dds"
	trigger = {
		location:kaffa = {
			disease_has_stagnated = disease:bubonic_plague
		}
	}
	immediate = {
		hidden_effect = {
			location:messina = {
				change_disease_presence = {
					disease = disease:bubonic_plague
					value = 0.5
				}
			}
		}
	}
	option = {
		name = flavor_ufc.8.a
		show_as_tooltip = {
			location:messina = {
				change_disease_presence = {
					disease = disease:bubonic_plague
					value = 0.5
				}
			}
		}
	}
}

flavor_ufc.9 = {
	type = country_event
	title = flavor_ufc.9.title
	desc = flavor_ufc.9.desc
	fire_only_once = yes
	dynamic_historical_event = {
		tag = UFC
		from = 1346.1.1
		to = 1350.1.1
		monthly_chance = 100
	}
	image = "gfx/interface/illustrations/situation/black_death.dds"
	trigger = {
		location:genoa = {
			disease_has_stagnated = disease:bubonic_plague
		}
	}
	immediate = {
		hidden_effect = {
			location:malaga = {
				change_disease_presence = {
					disease = disease:bubonic_plague
					value = 0.1
				}
			}
		}
	}
	option = {
		name = flavor_ufc.9.a
		show_as_tooltip = {
			location:malaga = {
				change_disease_presence = {
					disease = disease:bubonic_plague
					value = 0.1
				}
			}
		}
		custom_tooltip = flavor_ufc.9.a.tt
	}
	after = {
		hidden_effect = {
			c:UFC = {
				trigger_event_non_silently = {
					id = flavor_ufc.10
					days = 128
				}
			}
		}
	}
}

flavor_ufc.10 = {
	type = country_event
	title = flavor_ufc.10.title
	desc = flavor_ufc.10.desc
	fire_only_once = yes
	image = "gfx/interface/illustrations/situation/black_death.dds"

	immediate = {
		character:cas_alfonso_xi_burgundy = {
			save_scope_as = target_character
		}
	}
	option = {
		name = flavor_ufc.10.a
		province:cadiz_province = {
			every_location_in_province = {
				change_disease_presence = {
					disease = disease:bubonic_plague
					value = 0.2
				}
			}
		}
		province:malaga_province = {
			every_location_in_province = {
				change_disease_presence = {
					disease = disease:bubonic_plague
					value = 0.1
				}
			}
		}
		c:CAS = {
			add_yearly_manpower = -3
		}
		c:MOR = {
			add_yearly_manpower = -1.5
		}
		c:GRA = {
			add_yearly_manpower = -1.5
		}
		trigger_event_non_silently = {
			id = flavor_ufc.11
			days = 32
		}
	}
}

flavor_ufc.11 = {
	type = country_event
	title = flavor_ufc.11.title
	desc = flavor_ufc.11.desc
	fire_only_once = yes
	image = "gfx/interface/illustrations/situation/black_death.dds"

	immediate = {
		character:cas_alfonso_xi_burgundy = {
			save_scope_as = target_character
		}
	}
	option = {
		name = flavor_ufc.11.a
		show_as_tooltip = {
			kill_character = {
				target = character:cas_alfonso_xi_burgundy
				location = location:gibraltar
				disease = disease:bubonic_plague
			}
		}
		c:MOR = {
			add_truce_with = {
				target = c:CAS
			}
		}
		c:GRA = {
			add_truce_with = {
				target = c:CAS
			}
		}
		trigger_event_non_silently = {
			id = ufc_situations.2100
			days = 32
		}
	}
	after = {
		hidden_effect = {
			trigger_event_non_silently = {
				id = flavor_ufc.12
				days = 256
			}
		}
	}
}

flavor_ufc.12 = {
	type = country_event
	title = flavor_ufc.12.title
	desc = flavor_ufc.12.desc
	fire_only_once = yes
	image = "gfx/interface/illustrations/situation/black_death.dds"

	immediate = {
		character:cas_pedro_i_burgundy = {
			save_scope_as = target_character
		}
	}
	option = {
		name = flavor_ufc.12.a
		c:GRA = {
			add_opinion = {
				modifier = opinion_ufc_petro_in_cas
				target = c:CAS
			}
		}
		c:CAS = {
			add_opinion = {
				modifier = opinion_ufc_petro_in_cas
				target = c:GRA
			}
		}
		international_organization:ufc_trade_association = {
			change_variable = {
				name = merchant_fenderal_impact
				add = 15
			}
		}
	}
}


flavor_ufc.13 = {
	type = country_event
	title = flavor_ufc.13.title
	desc = flavor_ufc.13.desc
	fire_only_once = yes
	image = "gfx/interface/illustrations/situation/black_death.dds"

	immediate = {
		character:gra_ibn_khatib_script = {
			save_scope_as = target_character
		}
	}
	option = {
		name = flavor_ufc.13.a
		c:GRA = {
			add_country_modifier = {
				modifier = segregate_the_infected
			}
		}
		add_country_modifier = {
			modifier = ufc_modifier_the_aftermath_of_black_death
			years = 100
			size = {
				value = 2
			}
		}
		custom_tooltip = flavor_ufc.13.a.tt
		hidden_effect = {
			every_country = {
				limit = {
					capital_in_old_world_trigger = yes
				}
				add_country_modifier = {
					modifier = ufc_modifier_the_aftermath_of_black_death
					years = 100
				}
			}
		}
		show_as_tooltip = {
			c:SWE = {
				add_country_modifier = {
					modifier = ufc_modifier_the_aftermath_of_black_death
					years = 100
				}
			}
		}
	}

	after = {
		hidden_effect = {
			trigger_event_non_silently = {
				id = flavor_ufc.14
				days = 128
			}
		}
	}
}

flavor_ufc.14 = {
	type = country_event
	title = flavor_ufc.14.title
	desc = flavor_ufc.14.desc
	fire_only_once = yes
	image = "gfx/interface/illustrations/situation/black_death.dds"

	immediate = {

	}
	option = {
		name = flavor_ufc.14.a
		change_societal_value = {
			type = centralization_vs_decentralization
			value = societal_value_move_to_left
		}
		change_societal_value = {
			type = serfdom_vs_free_subjects
			value = societal_value_move_to_left
		}
		change_societal_value = {
			type = individualism_vs_communalism
			value = societal_value_move_to_right
		}
	}
	option = {
		name = flavor_ufc.14.b
		change_societal_value = {
			type = centralization_vs_decentralization
			value = societal_value_move_to_right
		}
		change_societal_value = {
			type = serfdom_vs_free_subjects
			value = societal_value_move_to_right
		}
		change_societal_value = {
			type = individualism_vs_communalism
			value = societal_value_move_to_left
		}
	}
	after = {
		hidden_effect = {
			trigger_event_non_silently = {
				id = flavor_ufc.14
				days = 256
			}
		}
	}
}

flavor_ufc.15 = {
	type = country_event
	title = flavor_ufc.15.title
	desc = flavor_ufc.15.desc
	fire_only_once = yes
	image = "gfx/interface/illustrations/situation/black_death.dds"

	immediate = {

	}
	option = {
		name = flavor_ufc.15.a
		custom_tooltip = flavor_ufc.15.a.tt
		hidden_effect = {
			add_country_modifier = {
				modifier = ufc_modifier_the_aftermath_of_black_death
				years = 0
				mode = add_and_extend
				size = {
					subtract = 1
				}
			}
		}
		c:GRA = {
			remove_country_modifier = segregate_the_infected
		}
	}
	after = {

	}
}

flavor_ufc.16 = {
	type = country_event
	title = flavor_ufc.16.title
	desc = flavor_ufc.16.desc
	fire_only_once = yes
	illustration_tags = {
		10 = regular
		10 = interior
	}
	immediate = {

	}
	option = {
		name = flavor_ufc.16.a
		custom_tooltip = flavor_ufc.16.a.tt
		set_variable = ufc_variable_the_legacy_of_fatima_nasrid
	}
}