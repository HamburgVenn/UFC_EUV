on_game_start = {
    on_actions = {
        UFC_on_game_start
    }
}

on_winning_war = {
    on_actions = {
        UFC_on_winning_war
    }
}


on_character_death = {
    on_actions = {
        UFC_on_character_death
    }
}

on_cabinet_assigned = {
    on_actions = {
        UFC_on_cabinet_assigned
    }
}

UFC_on_game_start = {
    effect = {
        character:gra_fatima_bint_al_ahmar_nasrid ?= {
            add_character_modifier = {
                modifier = "ufc_modifier_fatima"
                size = 1
                days = -1
            }
        }
        character:cas_alfonso_xi_burgundy ?= {
            add_character_modifier = {
                modifier = "ufc_modifier_strong"
                size = 1
                days = -1
            }
        }
        c:UFC = {
            trigger_event_non_silently = flavor_ufc.0
        }
    }
}

#root = country, scope:winner = country, scope:loser = country, scope:war = war
UFC_on_winning_war = {
    effect = {
        #for the win or lose the bet of the hundreds years of war
        if = {
            limit = {
                or = {
                    and = {
                        situation:rise_of_the_ufc = {
                            var:rise_of_the_ufc_support_hundred_years_war = flag:UFC_SITUATION_SUPPORT_FRA
                        }
                        scope:winner = {
                            has_or_had_tag = FRA
                        }
                        scope:loser = {
                            has_or_had_tag = ENG
                        }
                    }
                    and = {
                        situation:rise_of_the_ufc = {
                            var:rise_of_the_ufc_support_hundred_years_war = flag:UFC_SITUATION_SUPPORT_ENG
                        }
                        scope:winner = {
                            has_or_had_tag = ENG
                        }
                        scope:loser = {
                            has_or_had_tag = FRA
                        }
                    }
                }
            }
            c:UFC = {
                trigger_event_non_silently = ufc_situations.1030
            }
        }
        if = {
            limit = {
                or = {
                    and = {
                        situation:rise_of_the_ufc = {
                            var:rise_of_the_ufc_support_hundred_years_war = flag:UFC_SITUATION_SUPPORT_ENG
                        }
                        scope:winner = {
                            has_or_had_tag = FRA
                        }
                        scope:loser = {
                            has_or_had_tag = ENG
                        }
                    }
                    and = {
                        situation:rise_of_the_ufc = {
                            var:rise_of_the_ufc_support_hundred_years_war = flag:UFC_SITUATION_SUPPORT_FRA
                        }
                        scope:winner = {
                            has_or_had_tag = ENG
                        }
                        scope:loser = {
                            has_or_had_tag = FRA
                        }
                    }
                }
            }
            c:UFC = {
                trigger_event_non_silently = ufc_situations.1035
            }
        }
    }
}

#root = country, scope:target = character who dies
UFC_on_character_death = {
    effect = {
        if = {
            limit = {
                scope:target = character:gra_fatima_bint_al_ahmar_nasrid
            }
            c:UFC = {
                trigger_event_non_silently = flavor_ufc.16
            }
        }
    }
}

#root = country, scope:target = character who got assigned to the cabinet
UFC_on_cabinet_assigned = {
    effect = {
        if = {
            limit = {
                has_country_modifier = ufc_modifier_free_assign_cabinet
            }
            remove_country_modifier = ufc_modifier_free_assign_cabinet
        }
    }
}